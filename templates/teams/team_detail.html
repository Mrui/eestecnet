{% extends "base/prototypes/detail.html" %}
{% load thumbnail %}
{% block class %}member{% endblock %}
{% block title %}{{ object }}{% endblock %}
{% block pictures %}
    {% for imf in object.images.all %}
        {% thumbnail imf.image "375x225" crop="center" as im %}
            <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}"
                 alt="Picture of {{ object }}">
        {% endthumbnail %}
    {% endfor %}
{% endblock %}
{% block details %}
    <tr>
        {% if object.is_lc %}
            <td>LC Name</td>
        {% else %}
            <td>Team Name</td>
        {% endif %}
        <td>{{ object.name }} </td>
    </tr>
    <tr>
        <td>Founded:</td>
        <td> {{ object.founded }}</td>
    </tr>
    {% if object.is_lc %}
        <tr>
            <td>Website:</td>
            <td>{{ object.website }}</td>
        </tr>
    {% endif %}
    <tr>
        <td>Number of Members</td>
        <td>{{ object.member_count }}</td>
    </tr>
    <tr>
        <td colspan="2">
            <div class="actions">
                {% if user.is_authenticated %}
                    {% block application %}
                        {% if not user in object.users.all and not user in object.pending_applications %}
                            {% for event in object.event_set.all %}
                                {% if event.category == "recruitment" %}
                                    <a href="{% url 'eventapplication' event.slug %}"
                                       class="action-button shadow animate red">
                                        {% if object.type == "team" %}
                                            Apply to this Team
                                        {% else %}
                                            Join this Commitment
                                        {% endif %}
                                    </a>
                                {% endif %}
                            {% endfor %}
                        {% else %}
                        {% endif %}
                    {% endblock %}
                {% endif %}
            </div>
        </td>
    </tr>

{% endblock %}
{% block more %}
    <details open>
        {% block description %}
            <summary>Description</summary>
            {% autoescape off %}
                {{ object.description }}
            {% endautoescape %}
        {% endblock %}
    </details>
    <details open>
        <summary>Last Events</summary>
        {% include 'events/events.html' with object_list=object.event_set.all %}
    </details>
    <details open>
        {% if object.is_lc %}
            <summary>Board</summary>
        {% else %}
            <summary>Coordinator</summary>
        {% endif %}
        {% include 'account/eestecers.html' with object_list=object.board %}
    </details>
    <details open>
        <summary>Members</summary>
        {% include 'account/eestecers.html' with object_list=object.normal_members %}
    </details>
    {% if object.alumni %}
        <details>
            <summary>Alumni</summary>
            {% include 'account/eestecers.html' with object_list=object.alumni %}
        </details>
    {% endif %}
{% endblock %}

{% block aside %}
    {% if user in object.privileged or user.is_superuser %}
        <h2> Admin Actions</h2>
        <a href="{{ object.as_url }}board" id="board">Choose new board</a>
        <a href="{{ object.as_url }}description" id="board">Change Description</a>
        {% include "prototypes/modal.html" with buttontext='Change Details' buttonurl=object.as_url|add:"details" %}
        {% include "prototypes/modal.html" with buttontext='Manage Members' buttonurl=object.as_url|add:"members" %}
        {% include "prototypes/modal.html" with buttontext='Images' buttonurl=object.as_url|add:"images" %}
        {% include "prototypes/modal.html" with buttontext='Outgoing' buttonurl=object.as_url|add:"outgoing" %}
        {% include "prototypes/modal.html" with buttontext='Incoming' buttonurl=object.as_url|add:"applications" %}
    {% endif %}
{% endblock %}
