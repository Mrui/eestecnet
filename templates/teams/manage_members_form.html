{% extends 'teams/team_detail.html' %}
{% block managemembers %}
    <form action="{{ object.as_url }}members" id="managemembersform"
          enctype="multipart/form-data" method="post">
        {% csrf_token %}
        {{ form.as_p }}
        {% for inline in inlines %}
            <table style="width:100%;">
                <tr>
                    <th>User</th>
                    <th>Last Event</th>
                    <th>Total Events</th>
                    {% for field in inline.0.visible_fields %}
                        <th>
                            {{ field.label }}
                        </th>
                    {% endfor %}
                </tr>
                {% for inform in inline %}
                    {% for hidden in form.hidden_fields %}
                        {{ hidden }}
                    {% endfor %}
                    <tr><!-- Read only fields first-->
                        <td> {{ inform.instance }} </td>
                        <td> {{ inform.instance.user.last_event.start_date }} </td>
                        <td> {{ inform.instance.user.events_participated }} </td>
                        {% for field in inform.visible_fields %}
                            <td>
                                {{ field }}
                            </td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </table>
        {% endfor %}
        <input type="submit" value="Update Members">
    </form>
    <script type="text/javascript">
        $(function () {
            $("#managemembersform").dialog({width: 500, height: 500});
            $("input[type=submit]").button();
        });
    </script>
{% endblock %}
